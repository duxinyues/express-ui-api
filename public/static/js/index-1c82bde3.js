var W=Object.defineProperty;var D=(i,o,r)=>o in i?W(i,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[o]=r;var I=(i,o,r)=>(D(i,typeof o!="symbol"?o+"":o,r),r);import{F as x,I as R}from"./index-0021922b.js";import{B as q}from"./ExclamationCircleFilled-8c3dffcc.js";import{m as u,c as A,l as _,d as G}from"./vite-b2c2d50c.js";import{r as S,_ as k,i as Y,k as J,s as F,A as K,c as Q,u as X,j as l,e as U}from"./index-6b6aa884.js";import{A as z}from"./AntdIcon-d8c0518e.js";import"./index-aaad3bfd.js";import"./index-65e99b06.js";import"./CloseOutlined-97431ef4.js";var Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}},{tag:"path",attrs:{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"close-circle",theme:"outlined"};const ee=Z;var B=function(o,r){return S.createElement(z,k(k({},o),{},{ref:r,icon:ee}))};B.displayName="CloseCircleOutlined";const re=S.forwardRef(B);var te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"};const ne=te;var H=function(o,r){return S.createElement(z,k(k({},o),{},{ref:r,icon:ne}))};H.displayName="LockOutlined";const se=S.forwardRef(H);var ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"};const oe=ie;var $=function(o,r){return S.createElement(z,k(k({},o),{},{ref:r,icon:oe}))};$.displayName="UserOutlined";const V=S.forwardRef($),ae="/static/png/login_left-f62113a4.png";var C={},ce={get exports(){return C},set exports(i){C=i}};/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */(function(i,o){(function(r,n){i.exports=n()})(Y,function(){var r={};r.version="0.2.0";var n=r.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};r.configure=function(e){var t,s;for(t in e)s=e[t],s!==void 0&&e.hasOwnProperty(t)&&(n[t]=s);return this},r.status=null,r.set=function(e){var t=r.isStarted();e=g(e,n.minimum,1),r.status=e===1?null:e;var s=r.render(!t),c=s.querySelector(n.barSelector),d=n.speed,m=n.easing;return s.offsetWidth,P(function(a){n.positionUsing===""&&(n.positionUsing=r.getPositioningCSS()),b(c,N(e,d,m)),e===1?(b(s,{transition:"none",opacity:1}),s.offsetWidth,setTimeout(function(){b(s,{transition:"all "+d+"ms linear",opacity:0}),setTimeout(function(){r.remove(),a()},d)},d)):setTimeout(a,d)}),this},r.isStarted=function(){return typeof r.status=="number"},r.start=function(){r.status||r.set(0);var e=function(){setTimeout(function(){r.status&&(r.trickle(),e())},n.trickleSpeed)};return n.trickle&&e(),this},r.done=function(e){return!e&&!r.status?this:r.inc(.3+.5*Math.random()).set(1)},r.inc=function(e){var t=r.status;return t?(typeof e!="number"&&(e=(1-t)*g(Math.random()*t,.1,.95)),t=g(t+e,0,.994),r.set(t)):r.start()},r.trickle=function(){return r.inc(Math.random()*n.trickleRate)},function(){var e=0,t=0;r.promise=function(s){return!s||s.state()==="resolved"?this:(t===0&&r.start(),e++,t++,s.always(function(){t--,t===0?(e=0,r.done()):r.set((e-t)/e)}),this)}}(),r.render=function(e){if(r.isRendered())return document.getElementById("nprogress");E(document.documentElement,"nprogress-busy");var t=document.createElement("div");t.id="nprogress",t.innerHTML=n.template;var s=t.querySelector(n.barSelector),c=e?"-100":h(r.status||0),d=document.querySelector(n.parent),m;return b(s,{transition:"all 0 linear",transform:"translate3d("+c+"%,0,0)"}),n.showSpinner||(m=t.querySelector(n.spinnerSelector),m&&L(m)),d!=document.body&&E(d,"nprogress-custom-parent"),d.appendChild(t),t},r.remove=function(){O(document.documentElement,"nprogress-busy"),O(document.querySelector(n.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&L(e)},r.isRendered=function(){return!!document.getElementById("nprogress")},r.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};function g(e,t,s){return e<t?t:e>s?s:e}function h(e){return(-1+e)*100}function N(e,t,s){var c;return n.positionUsing==="translate3d"?c={transform:"translate3d("+h(e)+"%,0,0)"}:n.positionUsing==="translate"?c={transform:"translate("+h(e)+"%,0)"}:c={"margin-left":h(e)+"%"},c.transition="all "+t+"ms "+s,c}var P=function(){var e=[];function t(){var s=e.shift();s&&s(t)}return function(s){e.push(s),e.length==1&&t()}}(),b=function(){var e=["Webkit","O","Moz","ms"],t={};function s(a){return a.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(f,p){return p.toUpperCase()})}function c(a){var f=document.body.style;if(a in f)return a;for(var p=e.length,y=a.charAt(0).toUpperCase()+a.slice(1),v;p--;)if(v=e[p]+y,v in f)return v;return a}function d(a){return a=s(a),t[a]||(t[a]=c(a))}function m(a,f,p){f=d(f),a.style[f]=p}return function(a,f){var p=arguments,y,v;if(p.length==2)for(y in f)v=f[y],v!==void 0&&f.hasOwnProperty(y)&&m(a,y,v);else m(a,p[1],p[2])}}();function T(e,t){var s=typeof e=="string"?e:w(e);return s.indexOf(" "+t+" ")>=0}function E(e,t){var s=w(e),c=s+t;T(s,t)||(e.className=c.substring(1))}function O(e,t){var s=w(e),c;T(e,t)&&(c=s.replace(" "+t+" "," "),e.className=c.substring(1,c.length-1))}function w(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function L(e){e&&e.parentNode&&e.parentNode.removeChild(e)}return r})})(ce);const le=C;le.configure({easing:"ease",speed:1e3,showSpinner:!0,trickleSpeed:200,minimum:.3});var M=(i=>(i[i.SUCCESS=200]="SUCCESS",i[i.ERROR=500]="ERROR",i[i.OVERDUE=599]="OVERDUE",i[i.TIMEOUT=1e4]="TIMEOUT",i.TYPE="success",i))(M||{});const ue=i=>{switch(i){case 400:u.error("请求失败！请稍后再试");break;case 401:u.error("登录失效！请重新登录");break;case 403:u.error("当前账号无权限访问");break;case 405:u.error("请求超时！请稍后再试");break;case 500:u.error("服务异常！");break;case 502:u.error("网关错误");break;case 503:u.error("服务不可用");break;case 504:u.error("网关超时");break;default:u.error("请求失败")}},j=new K,de={baseURL:"/",timeout:1e4,withCredentials:!0};class fe{constructor(o){I(this,"service");this.service=J.create(o),this.service.interceptors.request.use(r=>{C.start(),j.addPending(r),r.headers.noLoading;const n=F.getState().global.token;return{...r,headers:{...r.headers,"x-access-token":n}}},r=>Promise.reject(r)),this.service.interceptors.response.use(r=>{const{data:n,config:g}=r;return C.done(),j.removePending(g),n.code==M.OVERDUE?(F.dispatch(A("")),u.error(n.message),window.location.hash="/login",Promise.reject(n)):n.code&&n.code!==M.SUCCESS?(u.error(n.message),Promise.reject(n)):n},async r=>{const{response:n}=r;return C.done(),r.message.indexOf("timeout")!==-1?u.error("请求超时，请稍后再试"):(n&&ue(n.status),window.navigator.onLine||(window.location.hash="/500"),Promise.reject(r))})}get(o,r,n={}){return this.service.get(o,{params:r,...n})}post(o,r,n={}){return this.service.post(o,r,n)}put(o,r,n={}){return this.service.put(o,r,n)}delete(o,r,n={}){return this.service.delete(o,{params:r,...n})}}const pe=new fe(de),me=i=>pe.post("/api/login",i);function ge(i){const[o,r]=u.useMessage(),{setToken:n,setUserInfo:g}=i,[h]=x.useForm(),[N,P]=S.useState(!1),b=X();return l("div",{className:"login-container",children:U("div",{className:"login-box",children:[r,l("div",{className:"login-left",children:l("img",{src:ae,alt:"login"})}),U("div",{className:"login-form",children:[U("div",{className:"login-logo",children:[l("img",{className:"login-icon",src:_,alt:"logo"}),l("span",{className:"logo-text",children:"Vite-React-Admin"})]}),U(x,{form:h,labelCol:{span:5},initialValues:{remember:!0},onFinish:async O=>{try{P(!0);const w=await me(O),{message:L,data:e}=w;n(e==null?void 0:e.accessToken),g({userName:e==null?void 0:e.username}),o.open({type:"success",content:L,duration:1}).then(()=>b("/home"))}finally{P(!1)}},onFinishFailed:O=>{},size:"large",autoComplete:"off",children:[l(x.Item,{name:"username",rules:[{required:!0,message:"请输入用户名"}],children:l(R,{placeholder:"用户名：admin",prefix:l(V,{})})}),l(x.Item,{name:"password",rules:[{required:!0,message:"请输入密码"}],children:l(R.Password,{autoComplete:"new-password",placeholder:"密码：123456",prefix:l(se,{})})}),U(x.Item,{className:"login-btn",children:[l(q,{onClick:()=>{h.resetFields()},icon:l(re,{}),children:"重置"}),l(q,{type:"primary",loading:N,htmlType:"submit",icon:l(V,{}),children:"登录"})]})]})]})]})})}const he={setToken:A,setUserInfo:G},Ue=Q(null,he)(ge);export{Ue as default};
